<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calcula tu tarifa Baila Zouk con Stef y Nesa</title>

  <style>
    :root{
      --bg1:#0b0b16;
      --bg2:#14102a;
      --stroke:rgba(255,255,255,.12);
      --text:rgba(255,255,255,.94);
      --muted:rgba(255,255,255,.74);
      --muted2:rgba(255,255,255,.58);

      --pink:#ff4fd8;
      --blue:#43d9ff;
      --green:#24e57a;
      --amber:#ffcc66;

      --shadow:0 18px 60px rgba(0,0,0,.45);
      --r:20px;
      --r2:14px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% 10%, rgba(255,79,216,.22), transparent 55%),
        radial-gradient(900px 600px at 65% 15%, rgba(67,217,255,.20), transparent 55%),
        radial-gradient(900px 600px at 30% 90%, rgba(67,217,255,.10), transparent 60%),
        linear-gradient(135deg, var(--bg2), var(--bg1));
      min-height:100vh;
      padding:28px 16px 44px;
    }

    .wrap{max-width:1060px;margin:0 auto;}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
      border:1px solid var(--stroke);
      border-radius:var(--r);
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    /* HEADER */
    .hero{
      display:grid;
      grid-template-columns: 1.35fr .65fr;
      gap:18px;
      padding:24px 22px 18px;
    }
    @media (max-width: 900px){
      .hero{grid-template-columns:1fr}
    }

    h1{
      margin:0 0 10px;
      font-size:38px; /* +size */
      line-height:1.08;
      letter-spacing:.2px;
    }

    .brand{
      font-weight:1000;
      background: linear-gradient(90deg, var(--pink), var(--blue));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }

    .sub{
      margin:0 0 14px;
      color:var(--muted);
      font-size:17px; /* +size */
      line-height:1.45;
    }

    .chips{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin:10px 0 12px;
    }

    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border-radius:999px;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      color:var(--text);
      font-weight:800;
      font-size:15px; /* +size */
      white-space:nowrap;
    }
    .chip strong{font-weight:1000}
    .chip.green{
      background:rgba(36,229,122,.12);
      border-color:rgba(36,229,122,.26);
    }
    .chip a{color:inherit;text-decoration:none}

    .how{
      margin-top:10px;
      padding:14px 14px;
      border-radius:14px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.12);
      color:var(--muted);
      font-size:16px; /* +size */
      line-height:1.35;
    }

    /* LOGO */
    .logoBox{
      border-radius:var(--r);
      border:1px dashed rgba(255,255,255,.18);
      background:rgba(0,0,0,.18);
      min-height:220px;              /* M√ÅS GRANDE */
      display:flex;
      align-items:center;
      justify-content:center;
      padding:12px;
    }
    .logoBox img{
      width:100%;
      max-width:520px;               /* M√ÅS GRANDE */
      max-height:200px;              /* evita que se salga del box */
      height:auto;
      display:block;
      object-fit:contain;
      filter: drop-shadow(0 10px 30px rgba(0,0,0,.45));
    }

    /* MAIN */
    .main{ padding:18px 22px 24px; }

    .sectionTitle{
      font-size:22px; /* +size */
      margin:0 0 12px;
      letter-spacing:.2px;
      font-weight:950;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 900px){
      .grid{grid-template-columns:1fr}
    }

    .field{
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.10);
      border-radius:14px;
      padding:12px;
    }

    .label{
      font-size:15px; /* +size */
      color:var(--muted);
      margin:0 0 8px;
      font-weight:850;
    }

    select{
      width:100%;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.25);
      color:var(--text);
      padding:12px 12px;
      font-size:16px;
      outline:none;
    }

    /* MODALIDADES */
    .modsWrap{ margin-top:14px; display:grid; gap:10px; }

    .modRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:14px 14px;
      border-radius:14px;
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.10);
    }
    .modLeft{ display:flex; flex-direction:column; gap:4px; }
    .modName{ font-size:18px; font-weight:950; letter-spacing:.2px; }
    .modTime{ font-size:13px; color:var(--muted2); font-weight:800; }
    .modRow input{ width:20px;height:20px; accent-color: var(--blue); }

    .hint{
      margin-top:8px;
      color:var(--muted2);
      font-size:14px;
      font-weight:750;
    }

    /* DESCUENTO */
    .discountBar{
      margin-top:14px;
      padding:12px 12px;
      border-radius:14px;
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .toggle{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:900;
      color:var(--text);
      user-select:none;
      font-size:15px; /* +size */
    }
    .toggle input{width:20px;height:20px;accent-color:var(--green)}
    .smallNote{
      color:var(--muted2);
      font-size:13px;
      font-weight:750;
    }

    /* PRIVADAS (inline, seg√∫n Tipo) */
    .privateBox{
      margin-top:14px;
      padding:14px;
      border-radius:16px;
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.10);
      display:none;
    }
    .privateGrid{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 900px){
      .privateGrid{grid-template-columns:1fr}
    }
    .privateBox .title{
      font-size:16px;
      font-weight:1000;
      margin:0 0 12px;
      color:var(--text);
    }
    .privateRules{
      margin-top:10px;
      color:var(--muted2);
      font-size:13px;
      line-height:1.35;
      font-weight:750;
    }

    /* BOTONES */
    .btnRow{
      margin-top:16px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .btn{
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:12px 14px;
      border-radius:14px;
      font-weight:950;
      font-size:16px;
      cursor:pointer;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    .btn:hover{filter:brightness(1.06)}

    .btn.calc{
      padding:15px 20px;
      font-size:19px;
      letter-spacing:1px;
      text-transform:uppercase;
      background: linear-gradient(90deg, rgba(255,79,216,.34), rgba(67,217,255,.28));
      border-color: rgba(255,255,255,.22);
    }

    .btn.free{
      background: linear-gradient(90deg, rgba(255,204,102,.22), rgba(255,79,216,.18));
      border-color: rgba(255,204,102,.28);
      font-weight:1000;
    }

    .btn.whats{
      background: rgba(36,229,122,.14);
      border-color: rgba(36,229,122,.28);
      font-weight:1000;
    }

    /* RESULTADO */
    .result{
      margin-top:14px;
      padding:16px 16px;
      border-radius:16px;
      background:rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.12);
    }
    .total{
      font-size:46px; /* +size */
      font-weight:1100;
      margin:0 0 8px;
      letter-spacing:.3px;
    }
    .details{
      margin:0;
      color:var(--muted);
      font-size:15px;
      line-height:1.55;
      font-weight:750;
    }

    .whatsRow{
      margin-top:12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">

      <div class="hero">
        <div>
          <h1>Calcula tu tarifa <span class="brand">Baila Zouk</span> con Stef y Nesa</h1>
          <p class="sub">Puertollano ¬∑ Calcula al instante lo que quieres: clase suelta, mensual o privadas/packs.</p>

          <div class="chips">
            <span class="chip">üìç <strong>Edificio Tauro</strong> ¬∑ 1¬™ planta (izq.)</span>
            <span class="chip">üïí 18:30 Salsa ¬∑ 19:30 BachaZouk ¬∑ 20:30 Zouk</span>
            <span class="chip green">üü¢ <a id="chipStef" href="#">WhatsApp Stef: <strong>+34 645 77 20 10</strong></a></span>
            <span class="chip green">üü¢ <a id="chipNesa" href="#">WhatsApp Nesa: <strong>615 486 473</strong></a></span>
          </div>

          <div class="how">
            <strong>C√≥mo funciona:</strong> elige <b>Tipo</b> + <b>Personas</b> + (modalidades o privadas) ‚Üí pulsa <b>CALCULAR</b>.
            Al final puedes confirmar por WhatsApp con el mensaje ya listo.
          </div>
        </div>

        <div class="logoBox">
          <!-- Debe llamarse EXACTO "logobailazouk.png" y estar en la ra√≠z del repo -->
          <img src="logobailazouk.png" alt="Logo Baila Zouk" />
        </div>
      </div>

      <div class="main">
        <div class="sectionTitle">1) Selecci√≥n</div>

        <div class="grid">
          <div class="field">
            <div class="label">Tipo</div>
            <select id="tipo">
              <option value="mensual">Mensual</option>
              <option value="suelta">Clase suelta</option>
              <option value="privada">Privada + Packs</option>
            </select>
          </div>

          <div class="field">
            <div class="label">Personas</div>
            <select id="personas">
              <option value="1">1 persona</option>
              <option value="2">2 personas</option>
            </select>
          </div>

          <div class="field" id="modsCountBox">
            <div class="label">Modalidades (mensual)</div>
            <select id="modsCount">
              <option value="1">1 modalidad</option>
              <option value="2">2 modalidades</option>
              <option value="3">3 modalidades</option>
            </select>
          </div>
        </div>

        <div class="modsWrap">
          <div class="sectionTitle" style="margin:0;">2) Modalidades exactas</div>

          <div class="modRow">
            <div class="modLeft">
              <div class="modName">Salsa</div>
              <div class="modTime">(18:30)</div>
            </div>
            <input type="checkbox" id="mSalsa" />
          </div>

          <div class="modRow">
            <div class="modLeft">
              <div class="modName">BachaZouk</div>
              <div class="modTime">(19:30)</div>
            </div>
            <input type="checkbox" id="mBacha" />
          </div>

          <div class="modRow">
            <div class="modLeft">
              <div class="modName">Zouk</div>
              <div class="modTime">(20:30)</div>
            </div>
            <input type="checkbox" id="mZouk" />
          </div>

          <div class="hint" id="modsHint">Elige exactamente 1 modalidad.</div>
        </div>

        <div class="sectionTitle" style="margin:16px 0 10px;">3) Descuento (no acumulable)</div>
        <div class="discountBar">
          <label class="toggle" id="discToggleLabel">
            <input type="checkbox" id="discPair" />
            Voy con amigo/pareja (‚àí5‚Ç¨ por persona)
          </label>
          <div class="smallNote" id="discNote">
            Se aplica en <b>Mensual</b> y <b>Privadas</b> si hay <b>2 personas</b>. No aplica en clase suelta.
          </div>
        </div>

        <div class="privateBox" id="privateBox">
          <div class="title">Privadas + Packs</div>

          <div class="privateGrid">
            <div class="field" style="padding:0;background:none;border:none;">
              <div class="label">¬øEres alumno actual?</div>
              <select id="privAlumno">
                <option value="si">S√≠ (alumno)</option>
                <option value="no">No (externo)</option>
              </select>
            </div>

            <div class="field" style="padding:0;background:none;border:none;">
              <div class="label">Pack</div>
              <select id="privPack">
                <option value="1">1 clase</option>
                <option value="5">Pack 5 (pagas 4)</option>
                <option value="10">Pack 10 (pagas 8)</option>
              </select>
            </div>

            <div class="field" style="padding:0;background:none;border:none;">
              <div class="label">Intensivo / extra</div>
              <select id="privExtra">
                <option value="no">No</option>
                <option value="si">S√≠ (activar m√°s adelante)</option>
              </select>
            </div>
          </div>

          <div class="privateRules">
            <b>Tarifas privadas base:</b><br/>
            ‚Ä¢ Alumno: 1 pers = 25‚Ç¨ ¬∑ 2 pers = 20‚Ç¨/pers (40‚Ç¨)<br/>
            ‚Ä¢ Externo: 1 pers = 30‚Ç¨ ¬∑ 2 pers = 30‚Ç¨/pers (60‚Ç¨)<br/>
            ‚Ä¢ Pack 5: pagas 4 ¬∑ Pack 10: pagas 8
          </div>
        </div>

        <div class="btnRow">
          <button class="btn calc" id="btnCalc">CALCULAR</button>
          <a class="btn free" href="https://docs.google.com/forms/d/e/1FAIpQLSfJqgEEdjhupSm0R1-5Vi2xwgaYm93pTlrl8Nu3ACw/viewform" target="_blank" rel="noopener">
            üéÅ Consigue tu clase GRATIS (Formulario)
          </a>
        </div>

        <div class="result">
          <div class="total" id="totalTxt">Total: ‚Äî</div>
          <p class="details" id="detailTxt">Elige opciones y pulsa <b>CALCULAR</b>.</p>

          <div class="whatsRow">
            <a class="btn whats" id="btnWStef" href="#" target="_blank" rel="noopener">üü¢ Confirmar por WhatsApp (Stef)</a>
            <a class="btn whats" id="btnWNesa" href="#" target="_blank" rel="noopener">üü¢ Confirmar por WhatsApp (Nesa)</a>
            <a class="btn" id="btnLanding" href="https://bailazouk.my.canva.site/" target="_blank" rel="noopener">Volver a la Landing</a>
          </div>
        </div>

      </div>
    </div>
  </div>

<script>
  // ================== CONFIG ==================
  const WHATS_STEF = "34645772010";
  const WHATS_NESA = "34615486473"; // 615486473 con prefijo ES
  const LANDING_URL = "https://bailazouk.my.canva.site/";
  const FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLSfJqgEEdjhupSm0R1-5Vi2xwgaYm93pTlrl8Nu3ACw/viewform";

  // Mensual seg√∫n tu tabla (TOTAL)
  // 1 persona: 1->30, 2->50, 3->60
  // 2 personas: 1->50, 2->72, 3->90
  const mensual = {
    "1": { "1": 30, "2": 50, "3": 60 },
    "2": { "1": 50, "2": 72, "3": 90 }
  };

  // Clase suelta: 10‚Ç¨ por persona (TOTAL)
  const sueltaPorPersona = 10;

  // Privadas base total (antes de packs)
  // Alumno: 1=25, 2=40
  // Externo: 1=30, 2=60
  const privadasBase = {
    si: { "1": 25, "2": 40 },
    no: { "1": 30, "2": 60 }
  };

  // Packs: pagas 1 / 4 / 8
  const packFactor = { "1": 1, "5": 4, "10": 8 };

  // Descuento: -5‚Ç¨/persona si 2 personas => -10 total
  // Aplica en mensual y privadas, NO en suelta
  function descuentoTotal(tipo, personas, activado){
    if(!activado) return 0;
    if(personas !== "2") return 0;
    if(tipo === "mensual" || tipo === "privada") return 10;
    return 0;
  }

  // ================== HELPERS ==================
  const $ = (id)=>document.getElementById(id);

  function selectedMods(){
    const mods = [];
    if($("mSalsa").checked) mods.push("Salsa");
    if($("mBacha").checked) mods.push("BachaZouk");
    if($("mZouk").checked) mods.push("Zouk");
    return mods;
  }

  // Limita checkboxes seg√∫n 1/2/3 (solo mensual/suelta)
  function enforceModsLimit(){
    const tipo = $("tipo").value;

    // Privadas: modalidades libres (m√°x 3) -> no forzamos exacto
    if(tipo === "privada"){
      $("modsHint").textContent = "Elige 1 a 3 modalidades (opcional para privadas).";
      return;
    }

    let limit = parseInt($("modsCount").value, 10);

    // Clase suelta: siempre 1 modalidad
    if(tipo === "suelta"){
      limit = 1;
      $("modsCount").value = "1";
    }

    $("modsHint").textContent = `Elige exactamente ${limit} modalidad(es).`;

    const ids = ["mSalsa","mBacha","mZouk"];
    const checked = ids.filter(id => $(id).checked);

    // Si hay m√°s marcadas que el l√≠mite, desmarca extras
    if(checked.length > limit){
      for(let i = limit; i < checked.length; i++){
        $(checked[i]).checked = false;
      }
    }
  }

  function ensureExactLimitIfNeeded(){
    const tipo = $("tipo").value;
    if(tipo === "privada") return true;

    const limit = (tipo === "suelta") ? 1 : parseInt($("modsCount").value, 10);
    return selectedMods().length === limit;
  }

  function buildWhatsLink(phone, msg){
    const u = new URL("https://wa.me/" + phone);
    u.searchParams.set("text", msg);
    return u.toString();
  }

  function updateUI(){
    const tipo = $("tipo").value;
    const personas = $("personas").value;

    // Mostrar/ocultar selector cantidad modalidades
    if(tipo === "privada"){
      $("modsCountBox").style.display = "none";
      $("privateBox").style.display = "block";
    } else {
      $("modsCountBox").style.display = "block";
      $("privateBox").style.display = "none";
    }

    // Clase suelta fuerza 1 modalidad
    if(tipo === "suelta"){
      $("modsCount").value = "1";
    }

    // Descuento: solo habilitado si 2 personas
    $("discToggleLabel").style.opacity = (personas === "2") ? "1" : ".45";
    $("discPair").disabled = (personas !== "2");
    if(personas !== "2") $("discPair").checked = false;

    enforceModsLimit();
  }

  function calc(){
    const tipo = $("tipo").value;
    const personas = $("personas").value;

    // Validaci√≥n modalidades (solo mensual/suelta)
    if(!ensureExactLimitIfNeeded()){
      $("totalTxt").textContent = "Total: ‚Äî";
      $("detailTxt").textContent = "Selecciona las modalidades correctas seg√∫n el n√∫mero elegido.";
      return;
    }

    const mods = selectedMods();
    const disc = descuentoTotal(tipo, personas, $("discPair").checked);

    let total = 0;
    let tipoTxt = "";
    let extraTxt = "";

    if(tipo === "mensual"){
      const mCount = $("modsCount").value;
      total = mensual[personas][mCount];
      tipoTxt = `Mensual ¬∑ ${personas} persona(s) ¬∑ ${mCount} modalidad(es)`;
    }

    if(tipo === "suelta"){
      total = sueltaPorPersona * parseInt(personas,10);
      tipoTxt = `Clase suelta ¬∑ ${personas} persona(s)`;
    }

    if(tipo === "privada"){
      const alumno = $("privAlumno").value; // si/no
      const pack = $("privPack").value;     // 1/5/10
      const base = privadasBase[alumno][personas];
      const factor = packFactor[pack];
      total = base * factor;
      tipoTxt = `Privada ¬∑ ${alumno === "si" ? "Alumno" : "Externo"} ¬∑ ${personas} persona(s) ¬∑ Pack ${pack}`;

      if($("privExtra").value === "si"){
        extraTxt = " ¬∑ Intensivo: (activar y definir precio m√°s adelante)";
      }
    }

    // Aplicar descuento
    if(disc > 0){
      total = Math.max(0, total - disc);
    }

    // Mostrar resultado
    $("totalTxt").textContent = `Total: ${total} ‚Ç¨`;

    const modsLine = (mods.length ? mods.join(", ") : "‚Äî");
    const discLine = (disc > 0) ? `S√≠ (‚àí${disc}‚Ç¨ total)` : "No";

    $("detailTxt").innerHTML =
      `<b>Tipo:</b> ${tipoTxt}${extraTxt}<br/>
       <b>Modalidades:</b> ${modsLine}<br/>
       <b>Descuento amigo/pareja:</b> ${discLine}<br/>
       <b>Formulario clase GRATIS:</b> ${FORM_URL}<br/>
       <b>Landing:</b> ${LANDING_URL}`;

    // Mensaje WhatsApp pre-cargado
    const msg =
`Hola! üëã
He calculado mi tarifa en Baila Zouk (Puertollano).

‚úÖ Tipo: ${tipoTxt}${extraTxt}
‚úÖ Modalidades: ${modsLine}
‚úÖ Descuento amigo/pareja: ${discLine}
üí∂ Total: ${total} ‚Ç¨

¬øMe confirmas y me dices c√≥mo hago la inscripci√≥n?
Formulario clase GRATIS: ${FORM_URL}
Landing: ${LANDING_URL}`;

    $("btnWStef").href = buildWhatsLink(WHATS_STEF, msg);
    $("btnWNesa").href = buildWhatsLink(WHATS_NESA, msg);
  }

  // ================== EVENTS ==================
  ["tipo","personas","modsCount","mSalsa","mBacha","mZouk","discPair","privAlumno","privPack","privExtra"]
    .forEach(id => $(id).addEventListener("change", updateUI));

  $("btnCalc").addEventListener("click", calc);

  // Chips WhatsApp arriba
  $("chipStef").href = buildWhatsLink(WHATS_STEF, "Hola! Quiero info de tarifas/clases üòä");
  $("chipNesa").href = buildWhatsLink(WHATS_NESA, "Hola! Quiero info de tarifas/clases üòä");

  // Init
  updateUI();
</script>
</body>
</html>
