<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculadora de tarifas Baila Zouk en Puertollano (Stef & Nesa)</title>
  <meta name="description" content="Calcula tu tarifa al instante: clase suelta, mensual, pareja/amigos y clases privadas. Baila Zouk con Stef y Nesa en Puertollano." />
  <style>
    :root{
      --bg1:#050410;
      --bg2:#120b2a;
      --card:#0f1630;
      --card2:#101a3a;
      --stroke:rgba(255,255,255,.08);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.65);
      --accent:rgba(144,104,255,1);
      --accent2:rgba(72,232,255,1);
      --wa:#25d366;
      --shadow: 0 18px 50px rgba(0,0,0,.45);
      --radius: 18px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 10% 20%, rgba(144,104,255,.25), transparent 55%),
        radial-gradient(900px 500px at 90% 10%, rgba(72,232,255,.15), transparent 55%),
        radial-gradient(900px 600px at 60% 80%, rgba(255,0,200,.10), transparent 60%),
        linear-gradient(180deg, var(--bg2), var(--bg1));
      min-height:100vh;
      padding:32px 0 60px;
    }

    .container{
      width:min(1020px, 92vw);
      margin:0 auto;
    }

    .hero{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--stroke);
      border-radius: 22px;
      padding:22px 22px 16px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .hero:before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(650px 220px at 20% 20%, rgba(144,104,255,.25), transparent 55%),
        radial-gradient(650px 220px at 80% 10%, rgba(72,232,255,.18), transparent 55%);
      pointer-events:none;
      filter: blur(1px);
      opacity:.9;
    }
    .hero > *{ position:relative; }

    h1{
      margin:0 0 8px;
      font-size: clamp(22px, 3vw, 34px);
      letter-spacing:.2px;
      line-height:1.15;
    }
    .subtitle{
      margin:0 0 14px;
      color:var(--muted);
      font-size: 14px;
    }

    .badge-row{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      margin-top:10px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.18);
      color: rgba(255,255,255,.88);
      font-size: 13px;
      line-height:1;
      text-decoration:none;
      transition: transform .12s ease, filter .12s ease;
      white-space:nowrap;
    }
    .badge:hover{ transform: translateY(-1px); filter: brightness(1.08); }
    .badge b{ color: rgba(255,255,255,.95); font-weight:700; }
    .badge.wa{ border-color: rgba(37,211,102,.35); background: rgba(37,211,102,.10); }
    .badge.gift{ border-color: rgba(255,215,0,.55); background: rgba(255,215,0,.12); color:#fff3b0; }

    .hero-img{
      width:100%;
      max-width: 980px;
      aspect-ratio: 16/5;      /* banner bajito */
      object-fit: cover;        /* recorta sin deformar */
      display:block;
      margin: 14px auto 0;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.08);
      box-shadow: 0 18px 40px rgba(0,0,0,.35);
    }

    .grid{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:16px;
      margin-top:16px;
      align-items:start;
    }
    @media (max-width: 900px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      padding:16px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    .section-title{
      margin:0 0 10px;
      font-size: 15px;
      font-weight:800;
      color: rgba(255,255,255,.92);
    }
    label{
      display:block;
      font-size: 12px;
      color: rgba(255,255,255,.75);
      margin-bottom:6px;
    }
    .row{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 700px){
      .row{ grid-template-columns: 1fr; }
    }
    select, input[type="text"]{
      width:100%;
      padding:12px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(7,10,22,.45);
      color: rgba(255,255,255,.92);
      outline:none;
    }

    .checks{
      display:grid;
      gap:10px;
      margin-top:10px;
    }
    .check{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(7,10,22,.35);
    }
    .check-left{
      display:flex;
      align-items:center;
      gap:10px;
      font-size: 14px;
    }
    .check input{
      width:18px;height:18px;
      accent-color: var(--accent2);
    }
    .small{
      font-size:12px;
      color: rgba(255,255,255,.60);
      margin-top:6px;
    }
    .warn{
      font-size:12px;
      color: rgba(255,255,255,.70);
      margin: 8px 0 0;
    }

    .btn-row{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top:12px;
      align-items:center;
    }
    .btn{
      cursor:pointer;
      border:none;
      padding:12px 14px;
      border-radius:14px;
      background: rgba(144,104,255,.35);
      color:#fff;
      font-weight:800;
      box-shadow: 0 10px 20px rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.10);
      transition: transform .12s ease, filter .12s ease;
    }
    .btn:hover{ transform: translateY(-1px); filter: brightness(1.1); }
    .btn.secondary{
      background: rgba(255,255,255,.07);
      color: rgba(255,255,255,.9);
    }
    .btn.wa{
      background: rgba(37,211,102,.18);
      border-color: rgba(37,211,102,.35);
    }

    .total{
      margin-top:10px;
      font-size: 34px;
      font-weight:900;
      letter-spacing:.2px;
    }
    .pill{
      display:inline-block;
      margin-top:8px;
      padding:10px 12px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.18);
      font-size: 12px;
      color: rgba(255,255,255,.78);
    }

    .side h3{ margin:0 0 10px; font-size:15px; font-weight:900; }
    .side p{ margin:0 0 8px; color: rgba(255,255,255,.72); font-size: 13px; line-height:1.35; }
    .side .hint{ color: rgba(255,255,255,.62); font-size: 12px; }

    .hr{ height:1px; background: rgba(255,255,255,.08); margin:12px 0; }

    .priv-row{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 700px){
      .priv-row{ grid-template-columns: 1fr; }
    }

    .kpi{
      display:grid;
      gap:8px;
      margin-top:10px;
    }
    .kpi b{ color:#fff; }

    .note{
      font-size:12px;
      color: rgba(255,255,255,.60);
      margin-top:10px;
    }
  </style>
</head>

<body>
  <div class="container">

    <div class="hero">
      <h1>Calcula tu tarifa Baila Zouk con Stef y Nesa</h1>
      <p class="subtitle">Puertollano ¬∑ Calcula al instante seg√∫n lo que quieres: clase suelta, mensual, pareja/amigos o privadas.</p>

      <div class="badge-row">
        <span class="badge">üìç <b>Edificio Tauro</b> ¬∑ 1¬™ planta (izq.)</span>
        <span class="badge">üï∫ 18:30 Salsa ¬∑ 19:30 BachaZouk ¬∑ 20:30 Zouk</span>

        <!-- Botones WhatsApp -->
        <a class="badge wa" id="waStefTop" href="#" target="_blank" rel="noopener">üü¢ WhatsApp Stef: <b>+34 645 77 20 10</b></a>
        <a class="badge wa" id="waNesaTop" href="#" target="_blank" rel="noopener">üü¢ WhatsApp Nesa: <b>615 486 473</b></a>

        <!-- Bot√≥n clase gratis (Google Form) -->
        <a class="badge gift" href="https://docs.google.com/forms/d/e/1FAIpQLSfJqgEEdjhupSm0R1-5Vi2xHXLkY5xwgaYm93pTlrl8Nu3ACw/viewform"
           target="_blank" rel="noopener">üéÅ Consigue tu clase GRATIS (Formulario)</a>
      </div>

      <!-- Imagen: sube un archivo al repo y c√°mbialo aqu√≠.
           Recomendado: crear carpeta img/ y subir img/banner.jpg -->
      <img class="hero-img" src="img/banner.jpg" alt="Baila Zouk - Stef & Nesa" />
    </div>

    <div class="grid">

      <!-- Columna principal -->
      <div class="card">
        <div class="section-title">1) Tarifas de clases (seg√∫n tabla)</div>

        <div class="row">
          <div>
            <label for="tipo">Tipo</label>
            <select id="tipo">
              <option value="mensual">Mensual</option>
              <option value="clase_suelta">Clase suelta</option>
            </select>
          </div>

          <div>
            <label for="personas">Personas</label>
            <select id="personas">
              <option value="1">1 persona</option>
              <option value="2">2 personas</option>
            </select>
          </div>

          <div>
            <label for="modsCount">Modalidades</label>
            <select id="modsCount">
              <option value="1">1 modalidad</option>
              <option value="2">2 modalidades</option>
              <option value="3">3 modalidades</option>
            </select>
          </div>
        </div>

        <div class="hr"></div>

        <div class="section-title">2) Modalidades exactas</div>
        <div class="small">Elige exactamente las modalidades que quieres (se limita autom√°ticamente seg√∫n 1 / 2 / 3).</div>

        <div class="checks" id="checks">
          <div class="check">
            <div class="check-left">
              <input id="mSalsa" type="checkbox" value="Salsa">
              <span>Salsa</span>
            </div>
          </div>
          <div class="check">
            <div class="check-left">
              <input id="mBacha" type="checkbox" value="BachaZouk">
              <span>BachaZouk</span>
            </div>
          </div>
          <div class="check">
            <div class="check-left">
              <input id="mZouk" type="checkbox" value="Zouk">
              <span>Zouk</span>
            </div>
          </div>
        </div>

        <div id="modsHint" class="warn">Elige exactamente 1 modalidad(es).</div>

        <div class="hr"></div>

        <div class="section-title">3) Descuento (no acumulable)</div>
        <div class="row" style="grid-template-columns:1fr;">
          <div>
            <label for="descuento">Selecciona descuento</label>
            <select id="descuento">
              <option value="ninguno">Ninguno</option>
              <option value="invita_amigo">Invitas a un amigo (‚àí5‚Ç¨)</option>
            </select>
            <div class="small">Se aplica solo en ‚ÄúMensual‚Äù y solo si no est√°s en ‚Äú2 personas‚Äù.</div>
          </div>
        </div>

        <div class="btn-row">
          <button class="btn" id="btnCalc">Calcular</button>
          <a class="btn secondary" href="https://bailazouk.my.canva.site/" target="_blank" rel="noopener">Volver a la Landing</a>

          <!-- WhatsApp con mensaje prellenado -->
          <button class="btn wa" id="btnWaStef">Confirmar tarifa por WhatsApp (Stef)</button>
          <button class="btn wa" id="btnWaNesa">Confirmar tarifa por WhatsApp (Nesa)</button>
        </div>

        <div class="total" id="totalText">Total: ‚Äî</div>
        <div class="pill" id="detailPill">Tarifa: ‚Äî ¬∑ Precio por persona: ‚Äî</div>
        <div class="pill" id="modsPill">Modalidades: ‚Äî</div>
      </div>

      <!-- Columna lateral -->
      <div class="card side">
        <h3>Info r√°pida</h3>
        <p>üéØ Objetivo: que el alumno elija su tarifa y te escriba para confirmar.</p>
        <p class="hint">Tip: en el bot√≥n WhatsApp enviamos el mensaje ya escrito con el total, tarifa y modalidades.</p>

        <div class="hr"></div>

        <h3>4) Clases privadas + packs</h3>
        <p class="hint">Esta parte ya est√° lista para usar cuando activ√©is privadas e intensivos.</p>

        <div class="priv-row">
          <div>
            <label for="privAlumno">¬øEres alumno actual?</label>
            <select id="privAlumno">
              <option value="si">S√≠ (alumno)</option>
              <option value="no">No (externo)</option>
            </select>
          </div>
          <div>
            <label for="privPersonas">Personas</label>
            <select id="privPersonas">
              <option value="1">1 persona</option>
              <option value="2">Pareja (2)</option>
            </select>
          </div>
          <div>
            <label for="privPack">Pack</label>
            <select id="privPack">
              <option value="1">1 clase</option>
              <option value="5">Pack 5 (pagas 4)</option>
              <option value="10">Pack 10 (pagas 8)</option>
            </select>
          </div>
        </div>

        <div class="btn-row">
          <button class="btn" id="btnPriv">Calcular privadas</button>
        </div>

        <div class="total" style="font-size:28px" id="privTotal">Privadas: ‚Äî</div>
        <div class="kpi" id="privDetail">
          <div class="hint">Detalle: ‚Äî</div>
          <div class="hint">Tarifas usadas:</div>
          <div class="hint">‚Ä¢ Alumno: 1 persona = 25‚Ç¨ ¬∑ Pareja = 20‚Ç¨/persona (40‚Ç¨)</div>
          <div class="hint">‚Ä¢ Externo: 1 persona = 30‚Ç¨ ¬∑ Pareja = 30‚Ç¨/persona (60‚Ç¨)</div>
          <div class="hint">‚Ä¢ Pack 5: pagas 4 ¬∑ Pack 10: pagas 8</div>
        </div>

        <div class="note">
          üéÅ Clase GRATIS (cup√≥n):<br>
          <a href="https://docs.google.com/forms/d/e/1FAIpQLSfJqgEEdjhupSm0R1-5Vi2xHXLkY5xwgaYm93pTlrl8Nu3ACw/viewform"
             target="_blank" rel="noopener" style="color:#fff3b0;text-decoration:none;">
            Abrir formulario
          </a>
        </div>
      </div>

    </div>
  </div>

  <script>
    // ====== CONFIG ======
    const WHATSAPP_STEF = "34645772010";   // prefijo +34 sin + ni espacios
    const WHATSAPP_NESA = "34615486473";   // Nesa (Espa√±a +34)
    const LANDING_URL = "https://bailazouk.my.canva.site/";
    const FORM_GRATIS_URL = "https://docs.google.com/forms/d/e/1FAIpQLSfJqgEEdjhupSm0R1-5Vi2xHXLkY5xwgaYm93pTlrl8Nu3ACw/viewform";

    // Tabla tarifas mensual seg√∫n imagen:
    // - Clase suelta: 10‚Ç¨ (por persona), solo 1 persona (si eligen 2, se cobra 20‚Ç¨ como 2 sueltas)
    // - Mensual 1 persona:
    //   1 modalidad = 30‚Ç¨ (T1)
    //   2 modalidades = 50‚Ç¨ (T2)
    //   3 modalidades = 60‚Ç¨ (T3)
    // - Mensual 2 personas (pareja/amigos):
    //   1 modalidad = 50‚Ç¨ total (T4)
    //   2 modalidades = 72‚Ç¨ total (T5)
    //   3 modalidades = 90‚Ç¨ total (T6)

    // ====== Helpers ======
    const $ = (id) => document.getElementById(id);

    const tipoEl = $("tipo");
    const personasEl = $("personas");
    const modsCountEl = $("modsCount");
    const descuentoEl = $("descuento");

    const checksWrap = $("checks");
    const cbSalsa = $("mSalsa");
    const cbBacha = $("mBacha");
    const cbZouk  = $("mZouk");

    const modsHint = $("modsHint");

    const totalText = $("totalText");
    const detailPill = $("detailPill");
    const modsPill = $("modsPill");

    const waStefTop = $("waStefTop");
    const waNesaTop = $("waNesaTop");

    // Top WhatsApp directos (sin mensaje)
    waStefTop.href = `https://wa.me/${WHATSAPP_STEF}`;
    waNesaTop.href = `https://wa.me/${WHATSAPP_NESA}`;

    // ====== UI constraints ======
    function setAllowedChecks(){
      const tipo = tipoEl.value;
      const p = parseInt(personasEl.value, 10);
      let m = parseInt(modsCountEl.value, 10);

      // Si es "clase suelta": solo 1 modalidad
      if(tipo === "clase_suelta"){
        m = 1;
        modsCountEl.value = "1";
      }

      // Hint
      modsHint.textContent = `Elige exactamente ${m} modalidad(es).`;

      // Limitar checks: m√°ximo m seleccionadas
      const cbs = [cbSalsa, cbBacha, cbZouk];
      const selected = cbs.filter(x => x.checked);

      if(selected.length > m){
        // desmarca las √∫ltimas seleccionadas (simple: dejar las primeras m)
        selected.slice(m).forEach(x => x.checked = false);
      }

      // Si m==3: forzar todas marcadas
      if(m === 3){
        cbs.forEach(x => x.checked = true);
      }

      // Si m<3: habilitar/deshabilitar seg√∫n count actual
      const now = cbs.filter(x => x.checked).length;
      cbs.forEach(cb => {
        if(m === 3){
          cb.disabled = true;
        }else{
          // si ya hay m marcadas, deshabilita las no marcadas
          cb.disabled = (now >= m && !cb.checked) ? true : false;
        }
      });

      // Descuento: solo mensual y solo 1 persona
      if(tipo !== "mensual" || p !== 1){
        descuentoEl.value = "ninguno";
        descuentoEl.disabled = true;
      }else{
        descuentoEl.disabled = false;
      }
    }

    function getSelectedModalities(){
      const mods = [];
      if(cbSalsa.checked) mods.push("Salsa");
      if(cbBacha.checked) mods.push("BachaZouk");
      if(cbZouk.checked)  mods.push("Zouk");
      return mods;
    }

    function calcTarifa(){
      const tipo = tipoEl.value;
      const p = parseInt(personasEl.value, 10);
      const m = parseInt(modsCountEl.value, 10);
      const mods = getSelectedModalities();

      // Validaci√≥n: exactas
      if(m !== 3 && mods.length !== m){
        alert(`Selecciona exactamente ${m} modalidad(es).`);
        return null;
      }

      let total = 0;
      let tarifa = "‚Äî";
      let precioPersona = "‚Äî";

      if(tipo === "clase_suelta"){
        // 10‚Ç¨ por persona, 1 modalidad fija
        total = 10 * p;
        tarifa = "TARIFA 8";
        precioPersona = "10‚Ç¨ / persona";
      }else{
        // mensual
        if(p === 1 && m === 1){ total = 30; tarifa="TARIFA 1"; precioPersona="30‚Ç¨ / persona"; }
        if(p === 1 && m === 2){ total = 50; tarifa="TARIFA 2"; precioPersona="25‚Ç¨ / persona"; }
        if(p === 1 && m === 3){ total = 60; tarifa="TARIFA 3"; precioPersona="20‚Ç¨ / persona"; }

        if(p === 2 && m === 1){ total = 50; tarifa="TARIFA 4"; precioPersona="25‚Ç¨ / persona"; }
        if(p === 2 && m === 2){ total = 72; tarifa="TARIFA 5"; precioPersona="18‚Ç¨ / persona"; }
        if(p === 2 && m === 3){ total = 90; tarifa="TARIFA 6"; precioPersona="15‚Ç¨ / persona"; }

        // Descuento no acumulable: Invita amigo -5‚Ç¨
        // Regla: solo en mensual + 1 persona
        const d = descuentoEl.value;
        if(p === 1 && d === "invita_amigo"){
          total = Math.max(0, total - 5);
        }
      }

      return { total, tarifa, precioPersona, tipo, p, m, mods };
    }

    function renderResult(res){
      totalText.textContent = `Total: ${res.total} ‚Ç¨`;
      detailPill.textContent = `Tarifa: ${res.tarifa} ¬∑ Precio por persona: ${res.precioPersona}`;
      modsPill.textContent = `Modalidades: ${res.mods.join(", ") || "‚Äî"}`;
    }

    function buildMessage(res){
      const tipoTxt = (res.tipo === "clase_suelta") ? "Clase suelta" : "Mensual";
      const desc = descuentoEl.value === "invita_amigo" ? "Invitas a un amigo (‚àí5‚Ç¨)" : "Ninguno";

      return `Hola! üëã
Quiero confirmar mi tarifa Baila Zouk con Stef y Nesa.

‚úÖ Tipo: ${tipoTxt}
‚úÖ Personas: ${res.p}
‚úÖ Modalidades: ${res.mods.join(", ")}
‚úÖ Descuento: ${desc}

üí∞ Total: ${res.total} ‚Ç¨
üìå Tarifa: ${res.tarifa}

üéÅ Clase GRATIS (formulario): ${FORM_GRATIS_URL}
üåê Landing / info: ${LANDING_URL}

¬øMe confirm√°is y me dec√≠s c√≥mo reservar? üôè`;
    }

    function openWhatsApp(number, text){
      const url = `https://wa.me/${number}?text=${encodeURIComponent(text)}`;
      window.open(url, "_blank", "noopener");
    }

    // ====== Privadas ======
    const privAlumnoEl = $("privAlumno");
    const privPersonasEl = $("privPersonas");
    const privPackEl = $("privPack");
    const privTotalEl = $("privTotal");
    const privDetailEl = $("privDetail");

    function calcPrivadas(){
      const alumno = privAlumnoEl.value; // si/no
      const p = parseInt(privPersonasEl.value, 10);
      const pack = parseInt(privPackEl.value, 10);

      // Base:
      // Alumno: 1p = 25‚Ç¨; pareja = 20‚Ç¨/p => 40‚Ç¨
      // Externo: 1p = 30‚Ç¨; pareja = 30‚Ç¨/p => 60‚Ç¨
      let base = 0;
      let detalle = "";

      if(alumno === "si"){
        if(p === 1){ base = 25; detalle = "Alumno ¬∑ 1 persona ¬∑ 25‚Ç¨"; }
        else{ base = 40; detalle = "Alumno ¬∑ pareja ¬∑ 20‚Ç¨/persona (40‚Ç¨)"; }
      }else{
        if(p === 1){ base = 30; detalle = "Externo ¬∑ 1 persona ¬∑ 30‚Ç¨"; }
        else{ base = 60; detalle = "Externo ¬∑ pareja ¬∑ 30‚Ç¨/persona (60‚Ç¨)"; }
      }

      // Packs:
      // pack 1 => pagas 1
      // pack 5 => pagas 4
      // pack 10 => pagas 8
      let factor = 1;
      if(pack === 5) factor = 4;
      if(pack === 10) factor = 8;

      const total = base * factor;

      privTotalEl.textContent = `Privadas: ${total} ‚Ç¨`;
      // Actualiza detalle
      const lines = privDetailEl.querySelectorAll(".hint");
      if(lines && lines[0]) lines[0].textContent = `Detalle: ${detalle} ¬∑ Pack ${pack} (pagas ${factor})`;
    }

    // ====== Events ======
    function onChangeAny(){
      // Si es clase suelta: fuerza 1 modalidad y (opcional) permitir 1 o 2 personas
      // Tambi√©n aplicar constraints de checkboxes
      setAllowedChecks();
    }

    // Checkbox click: aplicar l√≠mite inmediato
    [cbSalsa, cbBacha, cbZouk].forEach(cb => {
      cb.addEventListener("change", () => setAllowedChecks());
    });

    [tipoEl, personasEl, modsCountEl, descuentoEl].forEach(el => {
      el.addEventListener("change", onChangeAny);
    });

    $("btnCalc").addEventListener("click", () => {
      const res = calcTarifa();
      if(!res) return;
      renderResult(res);

      // Guarda √∫ltimo c√°lculo para WhatsApp
      window.__LAST_RES__ = res;
    });

    // WhatsApp Stef
    $("btnWaStef").addEventListener("click", () => {
      const res = window.__LAST_RES__ || calcTarifa();
      if(!res) return;
      renderResult(res);
      const msg = buildMessage(res);
      openWhatsApp(WHATSAPP_STEF, msg);
    });

    // WhatsApp Nesa
    $("btnWaNesa").addEventListener("click", () => {
      const res = window.__LAST_RES__ || calcTarifa();
      if(!res) return;
      renderResult(res);
      const msg = buildMessage(res);
      openWhatsApp(WHATSAPP_NESA, msg);
    });

    // Privadas
    $("btnPriv").addEventListener("click", () => {
      calcPrivadas();
    });

    // Init defaults
    // (marca 1 modalidad por defecto para evitar "vac√≠o")
    cbBacha.checked = true;
    onChangeAny();

    // Render inicial ‚Äúno calculado‚Äù
    totalText.textContent = "Total: ‚Äî";
    detailPill.textContent = "Tarifa: ‚Äî ¬∑ Precio por persona: ‚Äî";
    modsPill.textContent = "Modalidades: ‚Äî";
  </script>
</body>
</html>
